#!/bin/bash

if [[ "$1" == "" ]]; then
    echo "USAGE: install_rpm  <name|url> [name2|url2]"
    echo "Check if a package exists before attempting to install, exits with 1 if any packages get installed"
    exit 0
fi
code=0
for pkg in "$@"
do

    name=$( basename $pkg)
    name=${name%.*}

    if ! rpm -qa | grep -e "^$name.*" 2>&1 > /dev/null; then
        code=1
        if [[ "$pkg" == *http:* || "$pkg" == *https://* ]]; then
             yum --nogpgcheck -y  localinstall  $pkg
        else
            yum install -y $pkg
        fi
    fi
done

exit $code